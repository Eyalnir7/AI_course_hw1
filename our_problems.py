from itertools import product, islice

our_problems = [
    {
        "map": [
            ['S', 'S', 'S', 'S', 'S', 'S', 'S', 'S', 'S'],
            ['S', 'S', 'I', 'S', 'S', 'S', 'S', 'S', 'S'],
            ['S', 'S', 'I', 'S', 'S', 'S', 'I', 'S', 'S'],
            ['I', 'S', 'S', 'S', 'B', 'S', 'S', 'S', 'I'],
            ['S', 'S', 'I', 'S', 'S', 'S', 'I', 'S', 'S'],
            ['S', 'S', 'I', 'S', 'S', 'S', 'S', 'S', 'S'],

        ],
        "pirate_ships": {"pirate_ship_1": (3, 4)},
        "treasures": {'treasure_1': (3, 8), 'treasure_2': (3, 0)},
        "marine_ships": {'marine_1': [(3, 2)], 'marine_2': [(3, 6)], 'marine_3': [(0, 6)],
                         'marine_4': [(1, 6)]}
    },

    {
        "map": [
            ["I", "I", "I", "S", "S", "S", "S"],
            ["I", "S", "S", "B", "S", "S", "S"],
            ["I", "S", "I", "I", "S", "I", "I"],
            ["I", "S", "S", "S", "S", "S", "I"],
            ["I", "I", "I", "I", "I", "I", "I"]
        ],
        "pirate_ships": {"pirate_ship_1": (1, 3)},
        "treasures": {'treasure_1': (1, 0), 'treasure_2': (3, 6)},
        "marine_ships": {'marine_1': [(1, 2)], "marine_2": [(3, 3), (3, 4), (3, 5)]}
    },

    {
        "map": [
            ['I', 'I'],
            ['S', 'S'],
            ['B', 'S']
        ],
        "pirate_ships": {"pirate_ship_1": (2, 0)},
        "treasures": {'t1': (0, 0), 't2': (0, 1)},
        "marine_ships": {'m1': [(1, 0), (1, 1), (2, 1)]}
    },

    {  # "cool problem"
        "map": [
            ['S', 'S', 'S', 'S', 'S', 'S', 'S', 'I'],
            ['S', 'S', 'I', 'I', 'I', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'S', 'S', 'I', 'S', 'I'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'B', 'S'],
            ['S', 'S', 'S', 'I', 'S', 'I', 'I', 'S'],
            ['I', 'S', 'I', 'I', 'S', 'S', 'S', 'S']
        ],
        "pirate_ships": {"pirate_ship_1": (4, 6)},
        "treasures": {'t1': (2, 7)},
        "marine_ships": {'m1': [(3, 6)], 'm2': [(3, 7)],
                         'm3': [(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6)],
                         'm4': [(0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6), (3, 6)],
                         'm5': [(5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3), (2, 4)],
                         'm6': [(4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3)],
                         'm7': [(3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2)],
                         'm8': [(2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2)],
                         'm9': [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2)],
                         'm10': [(0, 0), (1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2)],
                         'm11': [(6, 4), (6, 5), (6, 6), (6, 7), (5, 7)]}

    },

    {  # The same as "cool problem" but with 2 pirate ships
        "map": [
            ['S', 'S', 'S', 'S', 'S', 'S', 'S', 'I'],
            ['S', 'S', 'I', 'I', 'I', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'S', 'S', 'I', 'S', 'I'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'B', 'S'],
            ['S', 'S', 'S', 'I', 'S', 'I', 'I', 'S'],
            ['I', 'S', 'I', 'I', 'S', 'S', 'S', 'S']
        ],
        "pirate_ships": {"pirate_ship_1": (4, 6), "pirate_ship_2": (4, 6)},
        "treasures": {'t1': (2, 7)},
        "marine_ships": {'m1': [(3, 6)], 'm2': [(3, 7)],
                         'm3': [(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6)],
                         'm4': [(0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6), (3, 6)],
                         'm5': [(5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3), (2, 4)],
                         'm6': [(4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3)],
                         'm7': [(3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2)],
                         'm8': [(2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2)],
                         'm9': [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2)],
                         'm10': [(0, 0), (1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2)],
                         'm11': [(6, 4), (6, 5), (6, 6), (6, 7), (5, 7)]}

    },

    {  # this problem does not have a solution. The only difference w.r.t "cool problem" is in map[1][1]
        "map": [
            ['S', 'S', 'S', 'S', 'S', 'S', 'S', 'I'],
            ['S', 'I', 'I', 'I', 'I', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'S', 'S', 'I', 'S', 'I'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'S', 'S'],
            ['S', 'I', 'S', 'I', 'S', 'I', 'B', 'S'],
            ['S', 'S', 'S', 'I', 'S', 'I', 'I', 'S'],
            ['I', 'S', 'I', 'I', 'S', 'S', 'S', 'S']
        ],
        "pirate_ships": {"pirate_ship_1": (4, 6)},
        "treasures": {'t1': (2, 7)},
        "marine_ships": {'m1': [(3, 6)], 'm2': [(3, 7)],
                         'm3': [(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6)],
                         'm4': [(0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (1, 6), (2, 6), (3, 6)],
                         'm5': [(5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3), (2, 4)],
                         'm6': [(4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2), (2, 3)],
                         'm7': [(3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2), (2, 2)],
                         'm8': [(2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2), (3, 2)],
                         'm9': [(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2), (4, 2)],
                         'm10': [(0, 0), (1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (5, 1), (5, 2)], }

    }
]

MAX_TREASURES = 7

our_problems += [

    {
        "map": (my_map := [
            ['I', 'I', 'S', 'S', 'S', 'S', 'I', 'S', 'S', 'S', 'S'],
            ['S', 'S', 'I', 'S', 'I', 'S', 'I', 'S', 'I', 'S', 'S'],
            ['S', 'S', 'S', 'S', 'I', 'S', 'I', 'S', 'I', 'S', 'S'],
            ['S', 'S', 'I', 'S', 'I', 'S', 'S', 'S', 'I', 'S', 'S'],
            ['S', 'S', 'S', 'S', 'S', 'S', 'B', 'S', 'S', 'S', 'S'],
        ]),
        "pirate_ships": {"pirate_ship_1": (4, 6)},
        # all 'I's are treasures, but no more than MAX_TREASURES:
        "treasures": {f't{i}': (k, l) for i, (k, l)
                      in enumerate(islice(((k, l) for k, l in product(range(len(my_map)), range(len(my_map[0])))
                                           if my_map[k][l] == 'I'), MAX_TREASURES))
                      },
        "marine_ships": {'m1': [(3, 6)], 'm2': [(3, 7)],
                         'm3': [(4, 0), (4, 1), (4, 2), (4, 3), (4, 4), (4, 5)],
                         }

    }
]
